<!DOCTYPE html>
<html>
<head>
  <title>Shiva</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track': true %>
  <%= javascript_include_tag 'vendor/modernizr' %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <%= csrf_meta_tags %>
</head>
<body>

<header>
  <nav class="row topbar" role="navigation">
    <div class="title-area left">
      <h1>Shiva</h1>

      <!-- Right Nav Section -->
      <div class="right">
        <% if current_user %>
          <% current_user.reload %>
          <div class="avatar">
            <a data-dropdown="dropdownMenu" href="#" class="has-dropdown">
              <%= image_tag current_user.avatar, width: '32', alt: '' %>
              <span class="hide-for-small-only"><%= ' ' + current_user.name %></span>
            </a>
          </div>
        <% else %>
          <!-- Use smooth scrolling only when on the same page -->
          <% if request.original_fullpath != new_user_session_path %>
            <div class="right">
              <%= link_to 'Log in', new_user_session_path, class:'login button small radius', data: { 'target': 'login' } %>
            </div>
          <% end %>
        <% end %>
      </div>
      <% if current_user %>
      <div>
        <ul class="button-group radius">
          <% case request.original_fullpath %>
          <% when tracks_path %>
          <li><a class="button tiny secondary" href="<%= playlists_path %>">Playlists</a></li>
          <% when playlists_path %>
          <li><a class="button tiny secondary" href="<%= tracks_path %>">Tracks</a></li>
          <% else %>
          <li><a class="button tiny secondary" href="<%= tracks_path %>">Tracks</a></li>
          <li><a class="button tiny secondary" href="<%= playlists_path %>">Playlists</a></li>
          <% end %>
        </ul>
      </div>
      <% end %>
    </div>
  </nav>
</header>

<%= yield %>

<footer>
  <div class="row collapse">
    <a href="https://github.com/mdouchement/shiva">Shiva</a>
  </div>
</footer>

</body>
</html>
